<%
    var content = post.content;

    content = content.replace(/\{SOCIAL\}[\S\s]*\{\/SOCIAL\}/g, function (element, index) {
        var _content = post._content.match(/\{SOCIAL\}[\S\s]*\{\/SOCIAL\}/g);
        _content = _content ? _content[0].replace(/(\{SOCIAL\})|(\{\/SOCIAL\})/g, '') : '';
        var social = JSON.parse(_content);
        var html = '<div class="about-social">';
        for (var key in social) {
            var icon = social[key];
            for (var key in icon) {
                html += '<a href="' + icon[key] + '" target="_blank" style="margin-right:2rem;color:#999;border:0">' +
                            '<i class="icon-' + key + '"></i>' +
                        '</a>';
            }
        }
        return html + '</div>';
    });

    // 转换{CHART}
    content = content.replace(/\{CHART\}[\S\n]*\{\/CHART\}/g, function (element, index) {
        return '<div id="chart" style="width:100%;height:400px;max-width:100%"></div>';
    });

    // 转换{SCRIPT}
    var script = post._content.match(/\{SCRIPT\}[\S\s]*\{\/SCRIPT\}/g);
    script = script ? script[0].replace(/(\{SCRIPT\})|(\{\/SCRIPT\})/g, '') : '';

    content = content.replace(/\{SCRIPT\}[\S\s]*\{\/SCRIPT\}/g, '');
%>
<article class="content">
    <section class="typo">
        <%- content %>
    </section>
</article>

<script src="//cdn.bootcss.com/echarts/3.0.0/echarts.min.js"></script>
<script>
    <%- script %>
</script>
