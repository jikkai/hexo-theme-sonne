$highlight-color: #CCC;
$highlight-foreground: #2D2D2D;
$highlight-comment: #999;
$highlight-red: #BB1166;
$highlight-orange: #FFCC33;
$highlight-green: #00CC66;
$highlight-purple: #6644AA;

figure {
    &.highlight {
        position: relative;
        margin-bottom: 2.1em;
        line-height: 1.45em;
        font-size: 0.9em;
        white-space: pre;
        word-wrap: normal;
        background: $highlight-foreground;
        border-radius: 0.4em;
        overflow: hidden;
        &::before {
            content: attr(rel);
            width: 100%;
            height: 38px;
            color: #FFF;
            line-height: 38px;
            font-size: 16px;
            background-image: linear-gradient(#e8e7e8, #d3d2d3);
            font-weight: 700;
            padding: 0 80px;
            text-indent: 15px;
            float: left;
            box-sizing: border-box;
        }
        &::after {
            content: " ";
            position: absolute;
            top: 0;
            left: 20px;
            margin-top: 12px;
            border-radius: 50%;
            background: #fc625d;
            width: 12px;
            height: 12px;
            box-shadow: 20px 0 #fdbc40, 40px 0 #35cd4b;
            display: block;
        }
        figcaption {
            padding: 7px 10px;
            font-size: 0.8em;
        }
        table {
            width: 100%;
            margin: 0;
            display: block;
            overflow: auto;
            >tbody >tr >td {
                padding: 0;
                border: 0;
                &.gutter {
                    max-width: 40px;
                    text-align: right;
                    font-weight: bold;
                }
                &.code {
                    width: 100%;
                }
            }
        }
        pre {
            margin: 0;
            border: none;
        }
        .line {
            height: 20px;
        }
    }
    img {
        max-width: 100%;
        margin: auto auto 4px;
        display: block;
        box-sizing: border-box;
    }
    figcaption {
        position: absolute;
        top: 172px;
        left: -172px;
        width: 150px;
        margin-top: 0;
        color: #BBBBBB;
        line-height: 22px;
        text-align: right;
        font-size: 14px;
        font-weight: 400;
    }
}

pre {
    color: $highlight-color;
    background: $highlight-foreground;
    code {
        padding: 0;
        color: $highlight-foreground;
        background: none;
        text-shadow: none;
    }
    .comment {
        color: $highlight-comment;
    }

    .variable,
    .attribute,
    .tag,
    .regexp,
    .ruby .constant,
    .xml .tag .title,
    .xml .pi,
    .xml .doctype,
    .html .doctype,
    .css .id,
    .css .class,
    .css .pseudo {
        color: $highlight-red;
    }

    .number,
    .preprocessor,
    .built_in,
    .literal,
    .params,
    .constant,
    .command {
        color: $highlight-green;
    }

    .ruby .class .title,
    .css .rules .attribute,
    .string,
    .value,
    .inheritance,
    .header,
    .ruby .symbol,
    .xml .cdata,
    .special,
    .number,
    .formula {
        color: $highlight-orange;
    }

    .title,
    .css .hexcolor {
        color: $highlight-green;
    }

    .function,
    .python .decorator,
    .python .title,
    .ruby .function .title,
    .ruby .title .keyword,
    .perl .sub,
    .javascript .title,
    .coffeescript .title {
        color: $highlight-red;
    }

    .keyword,
    .javascript .function {
        color: $highlight-red;
    }

    .selector-tag {
        color: $highlight-orange;
    }
}
